import sys
import fire
import questionary
from pathlib import Path
import csv
import pandas

from fileio import load_csv


# Ask for the file path to load the lastest banking data CSV file
def load_bank_data():
    
    csvpath = questionary.text("Enter a file path to a rate-sheet (.csv):").ask()
    csvpath = Path(csvpath)
    if not csvpath.exists():
        sys.exit(f"Oops! Can't find this path: {csvpath}")

    return load_csv(csvpath)





#Prepare the header for CSV export
header= ["Lender", "Max Loan Amount", "Max LTV", "Max DTI", "Min Credit Score", "Interest Rate"]

#Ask the user if they would like to save the loan list to a CSV file
        ## If they would to save, ask for a file path
        ## Else exit the program

def export_loan_data():
    output_csvwriter = questionary.select("Would you like to save this loan data to a CSV file?", choices=["Yes", "No"],).ask()
    if  output_csvwriter == "Yes":
        filepath= questionary.text("Enter the filepath for where you would you like your loan list saved to:").ask()
        filepath=str(filepath)
        with open (Path(filepath), 'w', newline='') as csvfile:
                create_output_csvwriter = csv.writer(csvfile, delimiter=',')
                create_output_csvwriter.writerow(header)
                for lines in range(len(qualifying_loans)):
                    create_output_csvwriter.writerow(qualifying_loans[lines])
        # if not file_path.exists():
        #         for i = 1:3:
        #         try
        #             def directory():
        #             print("This is an incorrect file path")
        #             except
        #                     None
        #             else:
        #                 break
                else:
                    print("I'm sorry you have failed three attempts. Try running the program again")

        print("Your loan data had been saved to the 'data' folder. Thank you for using Dylan's loan qualifier app!")        
    elif  output_csvwriter == "No": 
        print("You have elected not to save. Thank you for using this loan qualifier!")
  

    
    # Use the csv library and `csv.writer` to write the header row
    # and each row of `loan.values()` from the `inexpensive_loans` list.
            